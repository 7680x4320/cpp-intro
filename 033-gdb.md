# デバッガー

本書はこのあと、更に複雑な機能やアルゴリズムを解説していく。読者は複雑な機能やアルゴリズムを使おうとして、間違ったコードを書くことだろう。間違ったコードは直せばよい。問題は、どこが間違っているのかわからない場合だ。

例えば以下のコードは1から10までの整数を標準出力するはずのプログラムだ。

~~~cpp
int main()
{
    for ( int i = 1 ; i < 10 ; ++i )
        std::cout << i ;
}
~~~

しかし実際に実行して見ると、1から9までの整数しか標準出力しない。なぜだろうか。

読者の中にはコード中の問題のある箇所に気がついた人もいるだろう。これはたったの5行のコードで、問題の箇所も一箇所だ。これが数百行、数千行になり、関数やクラスを複雑に使い、問題の原因は複数の箇所のコードの実行が組み合わさった結果で、しかも自分で書いたコードなので正しく書いたはずだという先入観がある場合、たとえコードとしてはささいな間違いであったとしても、発見は難しい。

こういうとき、実際にコードを一行ずつ実行したり、ある時点でプログラムの実行を停止させて変数の値を見たりできたならばどんなにかいいことだろう。

そんな夢を実現するのがデバッガーだ。この章ではデバッガーGDBの使い方を学ぶ。

GDBで快適にデバッグするには、プログラムをコンパイルするときにデバッグ情報を出力する必要がある。そのためには、GCCに`-g`オプションをつけてプログラムをコンパイルする。

~~~
$ g++ -g -o program program.cpp
~~~

本書のはじめに作った入門用のMakefileを使う場合は、`$gcc_options`に`-g`を加えることになる。

~~~
gcc_options = -std=c++17 -Wall --pedantic-error -g
~~~

この変更をした後は、`make clean`を実行してコンパイル済みヘッダーファイルを生成し直す必要がある。

~~~
$ make clean
$ make
~~~


